<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#2563eb">
    <title>Insideout.bond</title>
    <link rel="shortcut icon" href="images/logo.png" type="image/x-icon">
    <meta name="application-name" content="Insideout.bond">

    <!-- Meta Tags for SEO -->
    <meta name="description"
        content="Convert your PDF documents to high-quality JPG or PNG images instantly. Safe, private, and works entirely in your browser. All processing happens locally for maximum privacy.">
    <meta name="keywords"
        content="pdf to jpg, pdf to image, pdf converter, png to pdf, secure converter, browser-based tools, Insideout.bond">
    <link rel="canonical" href="https://insideout.bond/Tools/pdf-to-jpg.html">

    <!-- AdSense -->
    <!-- <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2280832801216201"
        crossorigin="anonymous"></script> -->

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-1605V9LS1K"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-1605V9LS1K');
    </script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- PDF.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }

        .drop-zone {
            border: 2px dashed #cbd5e1;
            transition: all 0.2s ease;
        }

        .drop-zone.drag-over {
            border-color: #3b82f6;
            background-color: #eff6ff;
            transform: scale(1.02);
        }

        .loader {
            border: 2px solid #f3f3f3;
            border-top: 2px solid #3b82f6;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }

        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 10px;
        }

        .animate-fade-in {
            animation: fadeIn 0.3s ease-out forwards;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>

<body
    class="bg-slate-50 text-slate-800 font-sans min-h-screen flex flex-col selection:bg-blue-100 selection:text-blue-900">

    <!-- Header -->
    <header class="bg-white shadow-sm border-b border-slate-200 sticky top-0 z-20">
        <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
            <div class="flex items-center gap-2">
                <div class="bg-blue-600 text-white p-1.5 rounded-lg shadow-sm">
                    <i data-lucide="file-type-2" class="w-6 h-6"></i>
                </div>
                <h1 class="text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-700 to-blue-500">
                    PDF<span class="text-slate-700">to</span>Image
                </h1>
            </div>
            <div
                class="hidden sm:flex items-center gap-2 text-xs font-medium text-emerald-600 bg-emerald-50 px-2 py-1 rounded-full border border-emerald-100">
                <i data-lucide="shield-check" class="w-3 h-3"></i>
                Secure Client-Side
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow flex flex-col items-center justify-start pt-6 pb-12 px-4 sm:px-6">
        <div class="w-full max-w-4xl space-y-6">

            <!-- Description -->
            <div class="text-center mb-6 sm:mb-8">
                <h2 class="text-2xl sm:text-3xl font-bold text-slate-900 mb-2">PDF to Image Converter</h2>
                <p class="text-slate-600 text-sm sm:text-base max-w-lg mx-auto">
                    Convert your PDF pages to high-quality images instantly.
                    <br class="hidden sm:block">Works securely on your device.
                </p>
            </div>

            <!-- Upload Box -->
            <div id="upload-area" class="bg-white rounded-2xl p-6 shadow-sm border border-slate-200">
                <div id="drop-zone"
                    class="drop-zone rounded-xl p-10 flex flex-col items-center justify-center cursor-pointer hover:bg-slate-50 transition-all group">
                    <div
                        class="bg-blue-50 p-4 rounded-full mb-4 group-hover:scale-110 transition-transform shadow-sm text-blue-600">
                        <i data-lucide="upload-cloud" class="w-10 h-10"></i>
                    </div>
                    <p class="text-slate-700 font-bold text-lg text-center">Click to upload or drag & drop</p>
                    <p class="text-slate-400 text-sm mt-1">PDF documents only</p>
                    <input type="file" id="file-input" class="hidden" accept=".pdf">
                </div>
            </div>

            <!-- Progress State -->
            <div id="processing-box"
                class="hidden bg-white rounded-2xl p-6 shadow-sm border border-slate-200 animate-fade-in">
                <div class="flex items-center justify-between mb-3">
                    <div class="flex items-center gap-3">
                        <div class="loader"></div>
                        <span id="status-text" class="font-medium text-slate-700 text-sm">Initializing...</span>
                    </div>
                    <span id="progress-percent" class="text-xs font-bold text-blue-600">0%</span>
                </div>
                <div class="w-full bg-slate-100 rounded-full h-2 overflow-hidden">
                    <div id="progress-bar" class="bg-blue-600 h-full w-0 transition-all duration-300 ease-out"></div>
                </div>
            </div>

            <!-- Controls & Results -->
            <div id="results-box" class="hidden space-y-4 animate-fade-in">
                <div
                    class="flex flex-wrap items-center justify-between gap-4 bg-white p-4 rounded-xl shadow-sm border border-slate-200">
                    <div class="flex items-center gap-4">
                        <h2 class="font-bold text-slate-800 text-sm sm:text-base">Export Settings</h2>
                        <div class="flex items-center bg-slate-100 rounded-lg p-1">
                            <button onclick="setFormat('jpg')" id="btn-fmt-jpg"
                                class="px-3 py-1 text-xs font-bold rounded-md transition-all bg-white shadow-sm text-blue-600">JPG</button>
                            <button onclick="setFormat('png')" id="btn-fmt-png"
                                class="px-3 py-1 text-xs font-bold rounded-md transition-all text-slate-500">PNG</button>
                        </div>
                    </div>

                    <div class="flex items-center gap-2">
                        <button id="download-merged"
                            class="bg-slate-900 hover:bg-slate-800 text-white px-4 py-2 rounded-lg text-sm font-semibold flex items-center shadow-sm disabled:opacity-50 transition-all active:scale-95">
                            <i data-lucide="combine" class="w-4 h-4 mr-2"></i> Merged
                        </button>
                        <button id="download-zip"
                            class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-semibold flex items-center shadow-sm disabled:opacity-50 transition-all active:scale-95">
                            <i data-lucide="archive" class="w-4 h-4 mr-2"></i> ZIP
                        </button>
                        <button id="reset-btn"
                            class="bg-white border border-slate-200 text-slate-600 hover:bg-slate-50 px-4 py-2 rounded-lg text-sm font-semibold transition-all">
                            Clear
                        </button>
                    </div>
                </div>

                <div id="pages-grid" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4">
                    <!-- Preview cards -->
                </div>
            </div>
        </div>
    </main>

    <!-- Message Box -->
    <div id="message-box"
        class="hidden fixed top-6 right-6 max-w-sm w-full bg-white border-l-4 border-blue-500 shadow-2xl p-4 rounded-r-lg transform transition-all translate-x-full z-50">
        <div class="flex items-start">
            <div id="msg-icon" class="flex-shrink-0 pt-0.5 text-blue-500">
                <i data-lucide="info" class="w-5 h-5"></i>
            </div>
            <div class="ml-3">
                <p id="msg-title" class="text-sm font-bold text-slate-900"></p>
                <p id="msg-body" class="text-xs text-slate-500 mt-1"></p>
            </div>
            <button onclick="hideMessage()" class="ml-auto flex-shrink-0 text-slate-400 hover:text-slate-600">
                <i data-lucide="x" class="w-4 h-4"></i>
            </button>
        </div>
    </div>

    <!-- Footer -->
    <footer class="pb-8">
        <p class="text-center text-slate-400/60 text-xs mt-6">
            &copy; 2026 Insideout.bond | A platform of innovation.
        </p>
    </footer>

    <script>
        // Initialize Lucide
        lucide.createIcons();

        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';

        const state = {
            pages: [],
            fileName: '',
            format: 'jpg',
            isProcessing: false,
            maxCanvasHeight: 16000 // Browser safety limit
        };

        const elements = {
            fileInput: document.getElementById('file-input'),
            dropZone: document.getElementById('drop-zone'),
            resultsBox: document.getElementById('results-box'),
            processingBox: document.getElementById('processing-box'),
            grid: document.getElementById('pages-grid'),
            progressBar: document.getElementById('progress-bar'),
            progressPercent: document.getElementById('progress-percent'),
            statusText: document.getElementById('status-text'),
            btnMerged: document.getElementById('download-merged'),
            btnZip: document.getElementById('download-zip')
        };

        // --- UI Logic ---
        function setFormat(fmt) {
            state.format = fmt;
            document.getElementById('btn-fmt-jpg').className = fmt === 'jpg' ? 'px-3 py-1 text-xs font-bold rounded-md transition-all bg-white shadow-sm text-blue-600' : 'px-3 py-1 text-xs font-bold rounded-md transition-all text-slate-500';
            document.getElementById('btn-fmt-png').className = fmt === 'png' ? 'px-3 py-1 text-xs font-bold rounded-md transition-all bg-white shadow-sm text-blue-600' : 'px-3 py-1 text-xs font-bold rounded-md transition-all text-slate-500';
            renderThumbnails();
        }

        function showMessage(title, body, type = 'info') {
            const box = document.getElementById('message-box');
            document.getElementById('msg-title').innerText = title;
            document.getElementById('msg-body').innerText = body;
            box.classList.remove('hidden', 'translate-x-full');
            setTimeout(hideMessage, 6000);
        }

        function hideMessage() {
            document.getElementById('message-box').classList.add('translate-x-full');
        }

        // --- Core Logic ---
        elements.dropZone.onclick = () => elements.fileInput.click();
        elements.fileInput.onchange = (e) => handleFile(e.target.files[0]);

        elements.dropZone.ondragover = (e) => {
            e.preventDefault();
            elements.dropZone.classList.add('drag-over');
        };
        elements.dropZone.ondragleave = () => elements.dropZone.classList.remove('drag-over');
        elements.dropZone.ondrop = (e) => {
            e.preventDefault();
            elements.dropZone.classList.remove('drag-over');
            handleFile(e.dataTransfer.files[0]);
        };

        async function handleFile(file) {
            if (!file || file.type !== 'application/pdf') {
                return showMessage("Invalid File", "Please select a PDF document.", "error");
            }

            state.fileName = file.name.replace(/\.[^/.]+$/, "");
            state.pages = [];
            state.isProcessing = true;

            elements.resultsBox.classList.add('hidden');
            elements.processingBox.classList.remove('hidden');
            elements.grid.innerHTML = '';

            try {
                const data = await file.arrayBuffer();
                const pdf = await pdfjsLib.getDocument({ data }).promise;
                const total = pdf.numPages;

                for (let i = 1; i <= total; i++) {
                    elements.statusText.innerText = `Rendering page ${i} of ${total}...`;
                    const percent = Math.round((i / total) * 100);
                    elements.progressBar.style.width = `${percent}%`;
                    elements.progressPercent.innerText = `${percent}%`;

                    const pageData = await renderPageToImage(pdf, i);
                    state.pages.push(pageData);
                }

                elements.processingBox.classList.add('hidden');
                elements.resultsBox.classList.remove('hidden');
                renderThumbnails();
            } catch (err) {
                console.error(err);
                showMessage("Error", "Could not process this PDF. It might be password protected or corrupted.");
                elements.processingBox.classList.add('hidden');
            } finally {
                state.isProcessing = false;
            }
        }

        async function renderPageToImage(pdf, pageNum) {
            const page = await pdf.getPage(pageNum);
            const scale = 1.5; // Optimized for balance between quality and memory
            const viewport = page.getViewport({ scale });

            const canvas = document.createElement('canvas');
            const context = canvas.getContext('2d');
            canvas.height = viewport.height;
            canvas.width = viewport.width;

            await page.render({ canvasContext: context, viewport: viewport }).promise;

            const data = canvas.toDataURL('image/jpeg', 0.8); // High quality JPEG for storage
            const dimensions = { width: viewport.width, height: viewport.height };

            // Critical: Clear canvas memory
            canvas.width = 0;
            canvas.height = 0;

            return { data, ...dimensions };
        }

        function renderThumbnails() {
            elements.grid.innerHTML = '';
            state.pages.forEach((page, idx) => {
                const div = document.createElement('div');
                div.className = 'group relative bg-white border border-slate-200 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-all';
                div.innerHTML = `
                    <img src="${page.data}" class="w-full h-auto aspect-[3/4] object-cover bg-slate-50">
                    <div class="absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center p-4 gap-2">
                        <span class="text-white font-bold text-sm">Page ${idx + 1}</span>
                        <button onclick="downloadSingle(${idx})" class="bg-white text-slate-900 px-3 py-1.5 rounded text-xs font-bold shadow-lg hover:scale-105 active:scale-95 transition-all">
                            Download ${state.format.toUpperCase()}
                        </button>
                    </div>
                    <div class="p-2 text-[10px] font-bold text-slate-400 bg-slate-50 flex justify-between">
                        <span>PAGE ${idx + 1}</span>
                        <span>${state.format.toUpperCase()}</span>
                    </div>
                `;
                elements.grid.appendChild(div);
            });
        }

        window.downloadSingle = async (idx) => {
            const page = state.pages[idx];
            // If the user wants PNG but we stored as JPEG, we convert on the fly
            const downloadUrl = await convertDataURL(page.data, state.format);
            const link = document.createElement('a');
            link.href = downloadUrl;
            link.download = `${state.fileName}_p${idx + 1}.${state.format}`;
            link.click();
        };

        async function convertDataURL(dataUrl, format) {
            if (format === 'jpg' && dataUrl.includes('image/jpeg')) return dataUrl;
            return new Promise((resolve) => {
                const img = new Image();
                img.onload = () => {
                    const canvas = document.createElement('canvas');
                    canvas.width = img.width;
                    canvas.height = img.height;
                    const ctx = canvas.getContext('2d');
                    ctx.drawImage(img, 0, 0);
                    const out = canvas.toDataURL(format === 'png' ? 'image/png' : 'image/jpeg', 0.9);
                    resolve(out);
                };
                img.src = dataUrl;
            });
        }

        elements.btnZip.onclick = async () => {
            elements.btnZip.disabled = true;
            const originalZipHtml = elements.btnZip.innerHTML;
            elements.btnZip.innerHTML = `<div class="loader mr-2"></div> Zipping...`;

            try {
                const zip = new JSZip();
                const folder = zip.folder(state.fileName);

                for (let i = 0; i < state.pages.length; i++) {
                    const finalData = await convertDataURL(state.pages[i].data, state.format);
                    folder.file(`${state.fileName}_page_${i + 1}.${state.format}`, finalData.split(',')[1], { base64: true });
                }

                const blob = await zip.generateAsync({ type: "blob" });
                const link = document.createElement('a');
                link.href = URL.createObjectURL(blob);
                link.download = `${state.fileName}_images.zip`;
                link.click();
            } finally {
                elements.btnZip.disabled = false;
                elements.btnZip.innerHTML = originalZipHtml;
            }
        };

        elements.btnMerged.onclick = async () => {
            const totalH = state.pages.reduce((a, b) => a + b.height, 0);
            const maxW = Math.max(...state.pages.map(p => p.width));

            if (totalH > state.maxCanvasHeight) {
                return showMessage("PDF Too Large", `The merged image would be ${totalH}px tall, which exceeds browser limits. Please use the ZIP download instead.`, "warning");
            }

            elements.btnMerged.disabled = true;
            const originalMergedHtml = elements.btnMerged.innerHTML;
            elements.btnMerged.innerHTML = `<div class="loader mr-2"></div> Merging...`;

            try {
                const canvas = document.createElement('canvas');
                canvas.width = maxW;
                canvas.height = totalH;
                const ctx = canvas.getContext('2d');

                if (state.format === 'jpg') {
                    ctx.fillStyle = "#ffffff";
                    ctx.fillRect(0, 0, maxW, totalH);
                }

                let y = 0;
                for (const page of state.pages) {
                    const img = await new Promise(r => {
                        const i = new Image();
                        i.onload = () => r(i);
                        i.src = page.data;
                    });
                    // Center align horizontal
                    const x = (maxW - page.width) / 2;
                    ctx.drawImage(img, x, y);
                    y += page.height;
                }

                const finalData = canvas.toDataURL(state.format === 'png' ? 'image/png' : 'image/jpeg', 0.85);
                const link = document.createElement('a');
                link.href = finalData;
                link.download = `${state.fileName}_merged.${state.format}`;
                link.click();
            } finally {
                elements.btnMerged.disabled = false;
                elements.btnMerged.innerHTML = originalMergedHtml;
            }
        };

        document.getElementById('reset-btn').onclick = () => {
            state.pages = [];
            elements.resultsBox.classList.add('hidden');
            elements.fileInput.value = '';
        };
    </script>
</body>

</html>